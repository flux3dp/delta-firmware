#!/usr/bin/env python

__doc__ = """
flux_wlan_scan is a wlan scanning tool for fluxmonitor.

Because scanning wifi access point require root privilege. fluxmonitor
split wifi scanning function to a standalone script.

Attention:
On linux, flux_wlan_scan will use wpa_cli and sudo commands below:
# sudo -n wpa_cli scan
# sudo -n wpa_cli scan_result
Please ensure user has such privilege to execute command in sudoer
list and remember allow execute these command with out `PASSWORD`
"""

import json
import sys

from fluxmonitor.sys.nl80211 import scan

try:
    sys.stdout.write(json.dumps(scan()))
    sys.exit(0)
except RuntimeError as error:
    sys.stdout.write(
        json.dumps({
            "status": False,
            "message": error.args[0],
            "exitcode": error.args[1]
        }))

    sys.exit(error.args[1])

